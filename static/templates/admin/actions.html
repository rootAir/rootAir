{% load i18n %}<!DOCTYPE html><html lang="en" ng-app="demo"><head>    <meta charset="utf-8">    <title>AngularJS ui-select</title>    <!-- <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular.js"></script> -->    <!-- <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular-sanitize.js"></script> -->    <!--<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->    <!--<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>-->    <!--<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.css">-->    <!--<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/select2/3.4.5/select2.css">-->    <!--<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.8.5/css/selectize.default.css">-->    <!-- ui-select files -->    <!--<link rel="stylesheet" href="/static/css/select.css">-->    <link rel="stylesheet" href="/static/css/bootstrap.css">    <!--<link rel="stylesheet" href="/static/css/select2.css">-->    <!--<link rel="stylesheet" href="/static/css/selectize.default.css">-->    <!-- js-select files -->    <script src="/static/js/jquery.min.js"></script>    <script src="/static/js/angular.js"> </script>    <script src="/static/js/angular-sanitize.js"> </script>    <script src="/static/js/select.js"></script>    <script src="/static/js/demo.js"></script>    <script src="/static/js/bootstrap.min.js"></script>        <!-- /*<style>    body {        padding: 10px;    }    .select2 > .select2-choice.ui-select-match {        /* Because of the inclusion of Bootstrap */        height: 15px;    }    .selectize-control > .selectize-dropdown {        top: 30px;    }    </style>*/ --></head><div class="actions">    {% for field in action_form %}        {% if field.label %}            <label>            {{ field.label }}        {% endif %}            {{ field }}        {% if field.label %}            </label>        {% endif %}    {% endfor %}    <button id="comment-button" type="submit" class="button" title="{% trans "Run the selected action" %}"        name="index" value="{{ action_index|default:0 }}">{% trans "Go" %}    </button>    {% if actions_selection_counter %}        <script type="text/javascript">            var _actions_icnt="{{ cl.result_list|length|default:"0" }}";        </script>        <span class="action-counter">{{ selection_note }}</span>        {% if cl.result_count != cl.result_list|length %}            <span class="all">{{ selection_note_all }}</span>            <span class="question">                <a href="javascript:;" title="{% trans "Click here to select the objects across all pages" %}">                    {% blocktrans with cl.result_count as total_count %}Select all {{ total_count }} {{ module_name }}{% endblocktrans %}                </a>            </span>            <span class="clear"><a href="javascript:;">{% trans "Clear selection" %}</a></span>        {% endif %}    {% endif %}</div><!--<div id="form-modal" class="modal fade">-->    <!--<div class="modal-dialog">-->        <!--<div class="modal-content">-->            <!--<div class="modal-header">-->                <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->                <!--<h4 class="modal-title"> Information provider</h4>-->            <!--</div>-->            <!--<div id="data-provider">-->                <!--&lt;!&ndash; <p id="data-provider"></p> &ndash;&gt;-->                <!--<select id="type-provider" class="js-example-basic-single"> </select>-->                <!--<iframe frameborder="0" style="width:100%;height:740px" src="https://www.draw.io/?chrome=0&db=0#G0B0zb64MSTlYdN2R5YWtMMGlPSDg"></iframe>-->            <!--</div>-->            <!--<div id="form-modal-body" class="modal-body">-->                <!--<p>One fine body&hellip;</p>-->            <!--</div>-->            <!--<div class="modal-footer">-->                <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->            <!--</div>-->        <!--</div>&lt;!&ndash; /.modal-content &ndash;&gt;-->    <!--</div>&lt;!&ndash; /.modal-dialog &ndash;&gt;--><!--</div>&lt;!&ndash; /.modal &ndash;&gt;-->{% block js %}<script>var formAjaxSubmit = function(form, modal) {    $(form).submit(function (e) {        e.preventDefault();        $.ajax({            type: $(this).attr('method'),            url: $(this).attr('action'),            data: $(this).serialize(),            success: function (xhr, ajaxOptions, thrownError) {                if ( $(xhr).find('.has-error').length > 0 ) {                    $(modal).find('.modal-body').html(xhr);                    formAjaxSubmit(form, modal);                } else {                    $(modal).modal('toggle');                }            },            error: function (xhr, ajaxOptions, thrownError) {            }        });    });}$('#comment-button').click(function(event) {    option = $('html').find('body').find('.flex').find('#changelist-form').find('.actions').find('option');    if ( ! option[1].selected ){        $('#result_list').find('.row1').first().find('input.action-select')[0].checked = true    }})$('#_comment-button').click(function(event) {    option = $('html').find('body').find('.flex').find('#changelist-form').find('.actions').find('option');    if ( ! option[1].selected ){        $('#result_list').find('.row1').first().find('input.action-select')[0].checked = true        console.log('o valor do extrato e ' + getExtract())        $('#form-modal-body').load('/weeknumber-form/', function () {            $('#form-modal').modal('toggle');            formAjaxSubmit('#form-modal-body form', '#form-modal');        });    }    function getExtract()    {        console.log('chegou')        var xmlhttp;        var js = 0;        xmlhttp=new XMLHttpRequest();        /*        && option[2].selected  && option.length > 1        Object status integer:        0 = uninitialized        1 = loading        2 = loaded        3 = interactive        4 = complete        */        xmlhttp.onreadystatechange=function(event, callback)        {            if (xmlhttp.readyState==4 && xmlhttp.status==200)            {                if (xmlhttp.responseText != '[]')                {                    alert(xmlhttp.responseText)                    event.preventDefault();                    event.stopPropagation();                    $('#form-modal-body').load('/weeknumber-form/', function () {                        $('#form-modal').modal('toggle');                        formAjaxSubmit('#form-modal-body form', '#form-modal');                    });                    var js_provider = eval(JSON.stringify(eval("("+ xmlhttp.responseText +")")));                    for (var key in js_provider) {                        $("#data-provider").append(                            $("<p></p>")                            .attr("name", key)                            .attr("value", key)                            .text("Launch => " + js_provider[key].launch + " Value => " + js_provider[key].value_debit)                        )                        $("#type-provider").append(                            $("<option></option>")                                .attr("value", js_provider[key].value_debit)                                .attr('name', key)                                .text(js_provider[key].launch)                        )                    }                 }                 else                 {                    alert('error or file extract Itau week imported not found.');                    _bool = false;                 }            }       }       js = (function(data) {          // do something with the response in the variable data          console.log('dentro da funccao = ' + data)        })(js);        xmlhttp.open("GET","/ajax_provider",true);        xmlhttp.send();        event.preventDefault();        event.stopPropagation();        function showProvider()        {            $('#form-modal-body').load('/weeknumber-form/', function () {                $('#form-modal').modal('toggle');                formAjaxSubmit('#form-modal-body form', '#form-modal');            });        };    }});</script>{% endblock js %}</html>